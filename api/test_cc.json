{"write_files": [{"content": "[mysqld]\nauto_increment_offset=None\nauto_increment_increment=255\ngeniedb_my_node_id=None\ngeniedb_subscriptions=None:192.168.33.None:5502\ngeniedb_buffer_pool_size=1503238553\ndefault_storage_engine=GenieDB\nport=3306\nssl_ca=/etc/mysql/ca.cert\nssl_cert=/etc/mysql/server.cert\nssl_key=/etc/mysql/server.pem", "owner": "root:root", "path": "/etc/mysql/conf.d/geniedb.cnf", "permissions": "0644"}, {"content": "CA_CERT", "owner": "mysql:mysql", "path": "/etc/mysql/ca.cert", "permissions": "0600"}, {"content": "SERVER_CERT", "owner": "mysql:mysql", "path": "/etc/mysql/server.cert", "permissions": "0600"}, {"content": "SERVER_KEY", "owner": "mysql:mysql", "path": "/etc/mysql/server.pem", "permissions": "0600"}, {"content": "CREATE DATABASE ;\nCREATE USER ''@'%' IDENTIFIED BY PASSWORD '*BE1BDEC0AA74B4DCB079943E70528096CCA985F8';\nCREATE USER 'dbaas'@'%' IDENTIFIED BY PASSWORD '*7B731418791BBD512D8EBBC1C45F9F3034AF0256';\nGRANT ALL ON .* to ''@'%';\nGRANT ALL ON *.* to 'dbaas'@'%' WITH GRANT OPTION;", "owner": "root:root", "path": "/etc/mysqld-grants", "permissions": "0644"}, {"content": "Name = node_None\nDevice = /dev/net/tun\nConnectTo = node_None", "owner": "root:root", "path": "/etc/tinc/cf/tinc.conf", "permissions": "0644"}, {"content": "#!/bin/sh\nip addr flush cf\nip addr add 192.168.33.None/24 dev cf\nip link set cf up", "owner": "root:root", "path": "/etc/tinc/cf/tinc-up", "permissions": "0755"}, {"content": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEA34jp0sVa9rX0/aqJEjeQy1Z0Kd8WGtN81MxHlXGN86zBqlQU\n11qTE+TzSVR0YwzJANLAATwVFpknUuiIH04ad5Fc754rLAnQz8SobJWH4S0lLF72\nvmk9j3AsdaC7GcO3mTYc0s/F8eLLBahTq0glHQfKOqMG3LnTgoeNPxGbRDDqH7aI\nN6rJCTYk/d5MbAiu+F1ZxwJPpcjT9AhTSpv5P2iFXOVe1DzvxqMFMjrN65duJdGw\nwabep9Sa02oX063bvulCircrhuNfS2aJZ2tyIcQl0ZowHDHipx00INq7efKi2n0y\npJbnXr9zTwoFcaO4J9mW1c7U5fADyAtswFuyPQIDAQABAoIBAA/nlvN3NVSud6MA\n2kXgjD3bheJgzBrWh2BAtKsubDI1TYZH+z+jYymcNa83Ahz2EOstE5pC4yE7fm/I\nub64eOue/STTdTDp9eCClpU7QnLEGowAqb+8jzPAgHlSGV3o7gxJrF1XiTb/swBR\nDLr4JCPfpQTtCpTz59e2u1cMcqa0TjAjfbd2AaavT0WGHOoodycpQwPuRXUZrWi0\nypvWnsCsw7wJGMpEOup+SmkC3PpTb1I323DXKLKb76vTJxZh7x2E89EAwjMANzIf\n1FKsJ9Hx+BaNRgWUA7LlvDB2u79PaXlzk1OD9kGzj56uKvI1fiDL8dmtgpU6mBX2\nsbwfqgECgYEA+qKfj6KM2rBuWwCXdR/6dYb0+IKg8cVbPnyoOWnXqgfqq2VzCP+j\nyDPBeTE5xFm+46WMVTcM6LLasmQ3aXK1/tD7+H+zSidRJxkbZR0BQ07XiAJQYGBi\nZIzUMrDjS6TkpQUsgtrcW4XSLn4jBg72t/L1xXxPkshaGawR1lKUHb0CgYEA5FHK\ngLzhQpStxMhxCQWY/sZs7U6hhhkh9U0XV0beaNbIqHUfY/mLh3/t2Y+60g4eEGwA\nwD7ATngLE4tRC7wZ+9A43lTFAil4vCh3CZTjYCx6bAqdnNlmV+WcqzumnK7x8waA\nyqEWL/Z5IxgQk9658FMUwNhoIYTl8RsbzpoP7oECgYAPnWAZf8QMv98wNjo5ZtOg\nzNaoQOMsDOKhYvzMDucLxdB9+yUOk3atu2O7XDDAJeM5pY+3o2Vfff0YDhxRqn7i\nMDzyf2o5HXf12p+VThhNDDVrWNGPH5Iht5Bk1BZlGRHRoh/iyyXdYdn1YZBnCTmf\nvjhHpHYErAzI+qpl0uE9dQKBgEPh4YBHJ/4gsE1qftj81hEhs68WisWQ4VzKT98+\nDdBD06LqN6wEvKxLp87ggd4EHoIpaku+HHT4Eer8p9sCUQNiVBYeQ/ixldjzevjZ\nUIT+lGNdAKFqrZgCh4MNmCrLhNoJm+8i17Lo5/k8JWmhdczzFp+Dd+pHVgpKUgkq\nGwSBAoGBAObzpgXyXyOM+A8mmoJwMG4st2Hov2EMzyF737QT+vGRwf3kElj4JRiQ\ncrG3Bn4qOURCEzeHHhewYZNFsODaw0sWBO/fkINuBq/MHNWQESt9tFSeaSaf07vW\ndSgc64TgukO28KabJEgjVJd0C89MjxndouR50emloKyGN6Fsl7KS\n-----END RSA PRIVATE KEY-----", "owner": "root:root", "path": "/etc/tinc/cf/rsa_key.priv", "permissions": "0600"}, {"content": "\nAddress=15bbb7df-8d4b-49f4-9210-418bb80235e5-None.dbaas.example.com\nSubnet=192.168.33.None/32\n-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA34jp0sVa9rX0/aqJEjeQ\ny1Z0Kd8WGtN81MxHlXGN86zBqlQU11qTE+TzSVR0YwzJANLAATwVFpknUuiIH04a\nd5Fc754rLAnQz8SobJWH4S0lLF72vmk9j3AsdaC7GcO3mTYc0s/F8eLLBahTq0gl\nHQfKOqMG3LnTgoeNPxGbRDDqH7aIN6rJCTYk/d5MbAiu+F1ZxwJPpcjT9AhTSpv5\nP2iFXOVe1DzvxqMFMjrN65duJdGwwabep9Sa02oX063bvulCircrhuNfS2aJZ2ty\nIcQl0ZowHDHipx00INq7efKi2n0ypJbnXr9zTwoFcaO4J9mW1c7U5fADyAtswFuy\nPQIDAQAB\n-----END PUBLIC KEY-----", "owner": "root:root", "path": "/etc/tinc/cf/hosts/node_None", "permissions": "0600"}, {"content": "PidFile=/var/run/zabbix/zabbix_agentd.pid\nLogFile=/var/log/zabbix/zabbix_agentd.log\nLogFileSize=0\nServer=zabbix.geniedb.com\nServerActive=zabbix.geniedb.com\nHostname=15bbb7df-8d4b-49f4-9210-418bb80235e5-None.dbaas.example.com\nInclude=/etc/zabbix/zabbix_agentd.d/\nEnableRemoteCommands=1", "owner": "root:root", "path": "/etc/zabbix/zabbix_agentd.conf", "permissions": "0644"}, {"content": "compress\n/var/backup/mysqlbackup.sql {\n    dateext\n    dateformat -%Y%m%d.%s\n    rotate 24\n}", "owner": "root:root", "path": "/etc/mysqlbackup.logrotate", "permissions": "0644"}, {"content": "3 */2 * * * root /usr/local/bin/backup", "owner": "root:root", "path": "/etc/cron.d/backup", "permissions": "0644"}, {"content": "access_key = \nsecret_key = ", "owner": "root:root", "path": "/root/.s3cfg", "permissions": "0600"}, {"content": "#!/bin/sh\n/usr/bin/mysqldump --all-databases > /var/backup/mysqlbackup.sql\n/usr/sbin/logrotate -fs /etc/mysqlbackup.state /etc/mysqlbackup.logrotate\n/usr/bin/s3cmd sync --delete-removed /var/backup/ s3://15bbb7df-8d4b-49f4-9210-418bb80235e5/None/\n/usr/bin/curl https://example.com/api/clusters/15bbb7df-8d4b-49f4-9210-418bb80235e5/1/set_backups -X POST -H \"Content-type: application/json\" -d \"$(\n  c=false\n  cd /var/backup/\n  printf '[\\n'\n  for i in *; do\n    if $c; then\n      printf ',\\n'\n    else\n      c=true\n    fi\n    stat --printf '  {\"filename\":\"%n\", \"time\":\"%y\", \"size\":\"%s\"}' \"$i\"\n  done\n  printf '\\n]\\n'\n)\"\n", "owner": "root:root", "path": "/usr/local/bin/backup", "permissions": "0755"}], "runcmd": [["lokkit", "-p", "3306:tcp"], ["mkdir", "-p", "/var/backup"]]}
